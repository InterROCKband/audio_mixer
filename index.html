<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mixer de Áudio</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #1e1e1e;
    color: #fff;
    margin: 0;
    padding: 10px;
  }
  h1 {
    text-align: center;
    font-size: 1.4rem;
  }
  select, button, input[type=range] {
    font-size: 1rem;
  }
  select {
    width: 100%;
    padding: 8px;
    margin-bottom: 15px;
    border-radius: 5px;
    border: none;
  }
  .track {
    display: flex;
    align-items: center;
    margin: 8px 0;
    flex-wrap: wrap;
    background-color: #2e2e2e;
    padding: 10px;
    border-radius: 8px;
  }
  .track-name {
    flex: 1 1 100%;
    font-weight: bold;
    margin-bottom: 6px;
  }
  .slider {
    flex: 1;
    margin-right: 10px;
  }
  input[type=range] {
    width: 100%;
  }
  .btn {
    background-color: #444;
    color: white;
    border: none;
    padding: 8px 12px;
    margin: 2px;
    border-radius: 6px;
    font-size: 1.2rem;
  }
  .btn:active {
    background-color: #666;
  }
  .controls {
    text-align: center;
    margin: 10px 0;
  }
  .time-slider {
    width: 100%;
    margin: 15px 0;
  }
  .mute { background-color: #c0392b; }
  .solo { background-color: #2980b9; }
  .mute.active { background-color: #e74c3c; }
  .solo.active { background-color: #3498db; }
</style>
</head>
<body>

<h1>Mixer de Áudio InterROCK</h1>

<select id="songSelector"></select>

<div class="controls">
  <button class="btn" id="playBtn">▶</button>
  <button class="btn" id="pauseBtn">⏸</button>
  <button class="btn" id="stopBtn">⏹</button>
</div>

<input type="range" id="timeSlider" class="time-slider" min="0" max="100" value="0">

<div id="tracksContainer"></div>

<script>
const songs = {
  "Jet - Are you gonna be my girl": [
    { name: "Vocais", file: "tracks/AYGBMG/VOCALS.mp3" },
    { name: "Baixo", file: "tracks/AYGBMG/BASS.mp3" },
    { name: "Bateria", file: "tracks/AYGBMG/DRUMS.mp3" },
    { name: "Guitarra Solo", file: "tracks/AYGBMG/LEAD_GUITAR.mp3" },
    { name: "Guitarra Base", file: "tracks/AYGBMG/RHYTHM_GUITAR.mp3" }
  ],
  "Jet - Cold Hard Bitch": [
    { name: "Vocais", file: "tracks/CHB/VOCALS.mp3" },
    { name: "Baixo", file: "tracks/CHB/BASS.mp3" },
    { name: "Bateria", file: "tracks/CHB/DRUMS.mp3" },
    { name: "Guitarra Solo", file: "tracks/CHB/GUITAR_LEAD.mp3" },
    { name: "Guitarra Base", file: "tracks/CHB/GUITAR_RHYTHM.mp3" },
    { name: "Metronomo", file: "tracks/CHB/METR.mp3" }
  ]
};

let audioElements = [];
let soloTrack = null;
let isPlaying = false;
let updateInterval;

const songSelector = document.getElementById('songSelector');
const tracksContainer = document.getElementById('tracksContainer');
const playBtn = document.getElementById('playBtn');
const pauseBtn = document.getElementById('pauseBtn');
const stopBtn = document.getElementById('stopBtn');
const timeSlider = document.getElementById('timeSlider');

Object.keys(songs).forEach(song => {
  let opt = document.createElement('option');
  opt.value = song;
  opt.textContent = song;
  songSelector.appendChild(opt);
});

songSelector.addEventListener('change', loadSong);

function loadSong() {
  clearInterval(updateInterval);
  audioElements.forEach(a => a.pause());
  tracksContainer.innerHTML = '';
  audioElements = [];
  soloTrack = null;

  const selectedSong = songSelector.value;
  songs[selectedSong].forEach((track, index) => {
    const trackDiv = document.createElement('div');
    trackDiv.className = 'track';
    const trackName = document.createElement('div');
    trackName.className = 'track-name';
    trackName.textContent = track.name;
    const slider = document.createElement('input');
    slider.type = 'range';
    slider.min = 0;
    slider.max = 1;
    slider.step = 0.01;
    slider.value = 1;
    slider.className = 'slider';

    const muteBtn = document.createElement('button');
    muteBtn.className = 'btn mute';
    muteBtn.textContent = 'M';
    muteBtn.onclick = () => toggleMute(index, muteBtn);

    const soloBtn = document.createElement('button');
    soloBtn.className = 'btn solo';
    soloBtn.textContent = 'S';
    soloBtn.onclick = () => toggleSolo(index, soloBtn);

    const audio = new Audio(track.file);
    audio.preload = 'auto';
    audioElements.push(audio);

    slider.addEventListener('input', () => {
      audio.volume = parseFloat(slider.value);
    });

    trackDiv.appendChild(trackName);
    trackDiv.appendChild(slider);
    trackDiv.appendChild(muteBtn);
    trackDiv.appendChild(soloBtn);
    tracksContainer.appendChild(trackDiv);
  });

  timeSlider.value = 0;
}

function toggleMute(index, btn) {
  const audio = audioElements[index];
  audio.muted = !audio.muted;
  btn.classList.toggle('active', audio.muted);
}

function toggleSolo(index, btn) {
  if (soloTrack === index) {
    soloTrack = null;
    audioElements.forEach(a => a.muted = false);
    document.querySelectorAll('.solo').forEach(b => b.classList.remove('active'));
  } else {
    soloTrack = index;
    audioElements.forEach((a, i) => a.muted = i !== index);
    document.querySelectorAll('.solo').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
  }
}

playBtn.addEventListener('click', () => {
  audioElements.forEach(a => { a.currentTime = timeSlider.value * a.duration / 100; a.play(); });
  isPlaying = true;
  updateInterval = setInterval(updateTimeSlider, 500);
});

pauseBtn.addEventListener('click', () => {
  audioElements.forEach(a => a.pause());
  isPlaying = false;
  clearInterval(updateInterval);
});

stopBtn.addEventListener('click', () => {
  audioElements.forEach(a => { a.pause(); a.currentTime = 0; });
  timeSlider.value = 0;
  isPlaying = false;
  clearInterval(updateInterval);
});

timeSlider.addEventListener('input', () => {
  if (!isPlaying) {
    audioElements.forEach(a => { a.currentTime = timeSlider.value * a.duration / 100; });
  }
});

function updateTimeSlider() {
  if (audioElements.length > 0 && audioElements[0].duration) {
    const progress = (audioElements[0].currentTime / audioElements[0].duration) * 100;
    timeSlider.value = progress;
  }
}

songSelector.selectedIndex = 0;
loadSong();
</script>
</body>
</html>
